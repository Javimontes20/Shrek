<button id="reset" style="display: none;">Reiniciar Juego</button>

<script>
    const cells = document.querySelectorAll('.cell');
    const turnText = document.getElementById('turn');
    const resetBtn = document.getElementById('reset');
    const modal = document.getElementById('modal');
    const modalText = document.getElementById('modal-text');

    let board = ["", "", "", "", "", "", "", "", ""];
    let currentPlayer = "Javi"; // Javi = Shrek, Rahma = Fiona
    let gameOver = false;

    const wins = [
        [0, 1, 2], [3, 4, 5], [6, 7, 8],
        [0, 3, 6], [1, 4, 7], [2, 5, 8],
        [0, 4, 8], [2, 4, 6]
    ];

    const icons = {
        "Javi": "../images/iconoshrek.png",
        "Rahma": "../images/iconofiona.png"
    };

    function checkWinner(player) {
        return wins.some(([a, b, c]) => board[a] === player && board[b] === player && board[c] === player);
    }

    function emptyCells() {
        return board.map((v, i) => v === "" ? i : null).filter(v => v !== null);
    }

    function placeIcon(cell, player) {
        cell.innerHTML = `<img src="${icons[player]}" alt="${player}">`;
    }

    function showModal(msg) {
        modalText.textContent = msg;
        modal.style.display = "flex";
        resetBtn.style.display = "inline-block"; // Mostrar el bot√≥n cuando aparece el modal
    }

    function endGame(msg) {
        gameOver = true;
        showModal(msg);
    }

    cells.forEach(cell => {
        cell.addEventListener('click', () => {
            if (gameOver) return;
            let idx = cell.dataset.index;
            if (board[idx] !== "") return;

            board[idx] = currentPlayer;
            placeIcon(cell, currentPlayer);

            if (checkWinner(currentPlayer)) {
                endGame(`üéâ Javi es el claro ganador como siempre, Rahma acepta mis condiciones üí™`);
                return;
            }

            currentPlayer = currentPlayer === "Javi" ? "Rahma" : "Javi";
            turnText.textContent = "Turno de: " + currentPlayer;

            if (emptyCells().length === 0 && !gameOver) {
                endGame("Javi es el claro ganador como siempre, Rahma acepta mis condiciones");
            }
        });
    });

    resetBtn.addEventListener('click', () => {
        board = ["", "", "", "", "", "", "", "", ""];
        gameOver = false;
        currentPlayer = "Javi";
        turnText.textContent = "Turno de: Javi";
        cells.forEach(c => c.innerHTML = "");
        modal.style.display = "none";
        resetBtn.style.display = "none"; // Ocultar el bot√≥n otra vez al reiniciar
    });
</script>
